<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/svg" href="images/d20-black-whitebg.svg">
    <!-- Link to the local CSS file -->
    <link rel="stylesheet" type="text/css" href="main.css">
    <!-- Link to the local JavaScript file -->
    <script type="text/javascript" src="main.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Babylonica&family=Bilbo+Swash+Caps&family=Caveat:wght@400;500;600;700&family=Comforter&family=Condiment&family=Dawning+of+a+New+Day&family=East+Sea+Dokdo&family=Fuggles&family=Grape+Nuts&family=Homemade+Apple&family=Inspiration&family=Julee&family=Just+Me+Again+Down+Here&family=Kolker+Brush&family=La+Belle+Aurore&family=Liu+Jian+Mao+Cao&family=Long+Can&family=Nanum+Brush+Script&family=Nothing+You+Could+Do&family=Oooh+Baby&family=Over+the+Rainbow&family=Permanent+Marker&family=Qwitcher+Grypen:wght@400;700&family=Reenie+Beanie&family=Rock+Salt&family=Ruthie&family=Sassy+Frass&family=Sedgwick+Ave&family=Shalimar&family=Smooch&family=Splash&family=Square+Peg&family=Swanky+and+Moo+Moo&family=Vujahday+Script&family=Waiting+for+the+Sunrise&family=Walter+Turncoat&family=Whisper&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/d1a29cf881.js" crossorigin="anonymous"></script>
    <title>Initiative Touch</title>
</head>

<body class="">
    <div class="header-menu">
        <button id="settingsMenuBtn" class="toggle-settings-menu" onclick="toggleSettingsMenu()">
            <i class="fas fa-ellipsis no-back-ui"></i>
            <i class="fas fa-xmark back-ui"></i>
        </button>
    </div>

    <div class="settings-menu hide">
        <div class="settings-menu-group">
            <label>Brightness</label>
            <div class="settings-input">
                <div class="button-group button-group-number-bump">
                    <button id="decrBrightness" onclick="decreaseBrightness()">-</button>
                    <input id="brightness" class="input-number-bump" value="1" type="number"
                        onchange="updateBrightnessLevel(this.value)" />
                    <button id="incrBrightness" onclick="increaseBrightness()">+</button>
                </div>
            </div>
        </div>
        <div class="settings-menu-group">
            <label>Font</label>
            <div class="settings-input">
                <select id="selectFont"></select>
            </div>
        </div>
        <div class="settings-menu-group" style="display: none;">
            <label>Round Counter</label>
            <div class="settings-input">
                <input id="toggleRoundCounter" type="checkbox" />
            </div>
        </div>
    </div>

    <p id="interimWords" style="display: none; color: white;"></p>
    <p id="eventlog" style="display: none; color: white;"></p>

    <div class="main">
        <button id="clearAll" class="clear-all players-listed-ui"
            onclick="confirm('Clear Everything?') ? clearAll() : null">✕</button>
        <form action="#" style="display:none;"><input id="testInput" type="text" placeholder="test input" /></form>
        <!--<div id="startDictation" class="gn" tabindex="0"><div class="mc"></div></div>-->
        <p class="pre-microphone-msg">Tap the mic to enable microphone on your device</p>
        <p class="post-microphone-msg">Hold the mic button and speak all initiative rolls. Ex: "Scanlan rolled 12"</p>
        <form id="speechForm" style="display:none;" action="">
            <input id="speechInput" class="speech-input" type="text"
                placeholder="⇣Dictate with voice key, then press ↵" />
        </form>
        <div class="players players-listed-ui">
            <div id="roundCounter" class="round-counter">
                <span class="round-label"></span>
                <!-- will be populated dynamically with: <div class="round-tally" data-marks="0"></div> -->
            </div>
            <ul id="entries">
                <!-- will be populated dynamically -->
            </ul>
        </div>
        <div class="button-group">
            <button id="prevTurn" class="previous-turn active-turn-ui" onclick="goBackOneTurn()"><i
                    class="fas fa-chevron-left" aria-hidden="true"></i></button>
            <div id="startDictation">
                <i class="fa-solid fa-microphone"></i>
            </div>
            <button id="nextTurn" class="advance-turn active-turn-ui" onclick="advanceTurn()"><i
                    class="fas fa-chevron-right" aria-hidden="true"></i></button>
        </div>
        <button id="startButton" class="no-active-turn-ui players-listed-ui" onclick="startTurnCounter()">Start</button>
    </div>
    <script>
    </script>
    <!--
        BUGS
        0. If the parser doesn't detect any player entries from the input string, then do not go into "players-listed" mode.
        1. Sometimes when starting combat, the first tally mark doesn't show up.  Test this first.
        2. Previous prompts array should be saved to a cookie, so it can be reused after a page refresh if needed.

        TODOs
        1. Add a radial menu on hover or touch of player name. Menu to include: Edit, Delete, Bloodied/not, Dead/not, Unconscious/not, Custom Condition
            a. Swipe right on a player name to instantly bloody them.
            b. Swipe right again (or swipe left?) to instantly cross them out (dead).
        2. Fix the bottom of the slate tablet so it shows the actual bottom edge if the div is tall enough, somehow.
        3. Refactor prompt storage - do not aggregate all prompt strings to reprocess on subsequent prompts. instead, weave into existing players list. MUST HAVE for #4 and #5 below.
        5. Add ability to manually add a player to the list manual (voice entry already works)
        6. Save the previous 'speechInput values somewhere in a class="speech-input" hidden input or div. maybe remove portions of the string that didn't parse into entries. (might require a rework of the whole parsing system though, like splitting everything by ' ' and then manipulating a big ol array.)
        7. Handle spelled-out words, so they show without all-caps or spaces between letters.
        8. Implement a fancy styled dialog instead of window.confirm() on clearAll button press.
    -->
</body>
</html>